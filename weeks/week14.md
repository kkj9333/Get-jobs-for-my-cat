# Day14 MimicNet: Fast Performance Estimates for Data Center Networks with Machine Learning

## 前提摘要
本文介绍了MimicNet，一种用于快速获取数据中心网络性能估计的方法。MimicNet提供了一个包级模拟的抽象，利用冗余性和机器学习的最新进展，快速准确地近似不直接可见的网络部分。
与常规模拟相比，MimicNet可以为拥有数千台服务器的数据中心提供超过两个数量级的加速。即使在这种规模下，MimicNet对FCT、吞吐量和RTT的估计结果与真实结果相差不到5%。 
MimicNet使用了深度学习模型和流近似技术，可以将非可观测部分的行为快速逼近，并组成一个可扩展的生成模型，达到与全尺度模拟相同甚至更好的准确性。
作者在数据中心网络的预生产性能评估方面提供了一个快速估计的解决方案，克服了今天网络规模的挑战。

## 研究背景
数据中心网络是连接网络中大型计算机集群的基础设施，处理大量的数据和服务，如云计算、视频流媒体、在线游戏等。而对于数据中心网络的性能评估是很重要的，因为它直接影响到用户的体验和服务的质量。然而，对于大规模、复杂的数据中心网络进行精确的性能评估需要大量的计算资源和时间。因此，研究如何快速准确地估计数据中心网络性能是一个重要的课题。

## 重要专有名词及概念
#### 数据中心	
一个设备集群，用于远程处理、存储和分发大量数据。
#### 规模评估	
测量和分析新技术或战略的效果和成本。
#### 测试平台	
再现真实环境和专门测试新技术或战略的环境。
#### 数据中心副本	
一个完整的、准确复制的数据中心。
#### 模拟
在计算机上使用一个模型来预测或评估真实世界中的现象或情况。
#### MimicNet
一种用于快速获得大型数据中心网络准确性能估计的系统。
#### 包级别模拟
模拟计算机网络中数据包的传输和处理过程。
#### 冗余
处理中发生错误时，不会丢失数据的备份系统。
#### 机器学习
让计算机自动学习，从而识别、分类和预测模式。
#### 吞吐量
网络中的数据处理速度。
#### RTT（Round-Trip Time）
往返时延，指从数据包发送到确认接收的时间，通常用于考虑网络通信的延迟时间。
#### 尾端FCT
定义为完成传输的最后一个字节和请求发出时间差的时间。
#### 包级模拟
包级模拟是在计算机网络中单个数据包的层面上进行模拟，即对于每个经过网络的数据包都会进行详细的模拟和跟踪。可详细的分析和评估单个数据包的行为和特征。包级模拟可以实现在任意网络设计下的灵活性和评估方面的丰富性，十分具有实用性
#### 流级模拟
流级模拟则是在更高层的抽象上进行模拟，它将数据包看作是一组有序的数据流，通过对整个流进行建模和跟踪来评估网络的性能。相对于包级模拟，流级模拟可以更快速地模拟流。
### 流完成时间（Flow Completion Time，FCT）
是指从一个流的第一个数据包从源节点传输到网络中的最后一个数据包到达目标节点所需的时间。FCT是衡量网络性能的一个重要指标，直接关系到数据传输的质量和用户的体验。通常，FCT越短表示网络性能越好。
### FatTree拓扑
Fat-tree使用了多个小规模、低成本的交换机替代了原来核心层、汇聚层昂贵的、高密度端口的交换机。相同点是，也都是三层架构，核心层、汇聚层、接入层。
- k叉树，即假设交换机的端口数量为k（图3中k=4）；
- 核心交换机数量为 (k/2)^2，pod的数量为k；
- 每个pod分为两层，每层k/2个交换机，上层称为汇聚层，下层称为接入层（也称Edge Layer）；
- 汇聚层k/2的端口连接k/2的核心交换机，剩下的端口连接接入层的交换机；
- 接入层同上，一半的端口连接上一层，一半的端口连接下面的主机。
![image](https://user-images.githubusercontent.com/51207072/229326917-5831ecbe-9519-415f-9be8-c2ea158e1cd4.png)
## 设计目标
1. 提供快速准确的数据中心网络性能估计。利用深度学习模型和流逼近技术，快速准确地近似不直接可见的网络部分。
2. 保持估计结果的准确性，以便更好地应用于预生产性能评估等方面。
3. 可调性，用户应该能够定义自己的准确性度量，并将这种准确性与改进的结果时间进行权衡。
4. 能够适应不同的网络拓扑结构和网络流量负载，并且具有较好的扩展性和灵活性。
5. ~~克服数据中心网络规模的挑战，为拥有数千台服务器的数据中心提供超过两个数量级的加速。~~
## 概观
MimicNet使用深度学习模型和流逼近技术相结合的方法来近似整个数据中心网络。
<br>具体而言，MimicNet首先使用深度学习模型来学习数据中心网络中各种网络元素之间的复杂关系，包括物理设备、拓扑结构、传输协议等等。该模型可以预测网络中各类统计特性的值，如流的大小、持续时间和传输时间等。
<br>然后，MimicNet使用流逼近技术逼近数据中心网络中不可观测的部分行为。针对数据流的大小、源目的地址等维度，MimicNet进行拟合，最终形成一个可扩展的生成模型。这个模型可以对不可见的网络部分进行快速逼近，从而实现对整个数据中心网络的近似。
<br>
MimicNet（如图）的使用从完整模拟的一小个子集开始：只有两个用户定义的集群相互通信。这种全保真度、小规模的模拟用于生成训练和测试集，用于上述模型的监督学习。增强这个训练阶段是一个可配置的超参数调优阶段，在这个阶段中，MimicNet探索了各种建模选项（Model Training->Model Testing->Model Training...）。<br>
![image](https://user-images.githubusercontent.com/51207072/229673284-a9df1ed1-b92b-404e-bd26-055bd06c7657.png)<br>

对于数据生成（1）和大规模模拟（5），MimicNet都使用OMNeT++作为模拟基底。
### 性能分析
![image](https://user-images.githubusercontent.com/51207072/229676245-6cdad7bf-1b35-48c2-8072-d1a5b25f19fc.png)<br>
如上图所示是Mimic以及通过它的数据包的类型。在高级别上，有两种类型：（1）与可观测集群（Cluster）交互的流量（Mimic-Real）和（2）与可观测集群不交互的流量（Mimic-Mimic），如图红线表示，请注意这部分流量的近似使用的是论文引用的模型。<br>
假设我们模拟N个集群（N>=2），T代表在数据中心的完整模拟中发送的数据包的数量，𝑝是离开集群与停留在集群内的流量的比率（集群间到集群内）,那么离开单个集群的流量数量就是$T𝑝 \over N$。
因为Mimic仅与单个可观测群进行通信，而不是相互通信，所以在近似模拟中离开Mimic的数据包数量如下:
$$T𝑝 \over N(N-1)$$

## 论文创新点概述
1. 提出了一种基于深度学习和流水线技术的数据中心网络性能估计方法MimicNet，具有高效、准确、可扩展等优点；
2. 使用FatTree拓扑结构，对数据中心网络的行为进行建模和仿真；
3. 在数千个服务器的数据中心中，MimicNet相对于常规仿真提供了超过两个数量级的加速，并且即使在这种规模下，MimicNet对尾延迟、吞吐量和RTT的估计与真实结果相差不到5％；
4. MimicNet能够适用于各种复杂协议和真实世界的流量模式，为数据中心网络性能评估提供了新的思路和方法。
## 论文不足之处
1. MimicNet使用的是基于包的仿真方法，没有考虑到整个系统的状态，这可能会导致某些性能指标的估计有一定的误差；
2. MimicNet仅仅考虑了数据中心网络的拓扑结构和流量特征，而没有考虑到其他影响性能的因素，例如系统的负载、硬件配置、软件环境等，这也可能会影响到性能指标的准确性；
3. MimicNet的深度学习模型需要大量的数据进行训练，而这些数据的采集和标注也是一项巨大的工作量，可能会受到数据采集和标注难度大、成本高等因素的限制。

